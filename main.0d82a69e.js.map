{"version":3,"sources":["scripts/main.js"],"names":["score","field","startButton","document","querySelector","gameField","querySelectorAll","cells","scoreVal","messageStart","messageLose","messageWin","render","i","j","children","textContent","classList","reset","forEach","cell","getRandomCell","num1","Math","floor","random","num2","moveCells","keybordEvent","key","moveHorizont","moveVertical","checkIsWin","canMoveHoriz","canMoveVert","remove","removeEventListener","res","count","push","some","item","arg","arr","clearEmpty","reverse","length","column","newArr","filter","rows","addEventListener","hendlEvent","target","add"],"mappings":";AAAA,aAyRC,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAvRD,IAAIA,EAAQ,EAERC,EAAQ,CACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAGNC,EAAcC,SAASC,cAAc,UACrCC,EAAYF,SAASG,iBAAiB,cACtCC,EAAQJ,SAASG,iBAAiB,eAClCE,EAAWL,SAASC,cAAc,eAElCK,EAAeN,SAASC,cAAc,kBACtCM,EAAcP,SAASC,cAAc,iBACrCO,EAAaR,SAASC,cAAc,gBAgC1C,SAASQ,IACF,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACjBb,EAAMY,GAAGC,KACXT,EAAUQ,GAAGE,SAASD,GAAGE,YAAcf,EAAMY,GAAGC,GAEhDT,EAAUQ,GAAGE,SAASD,GAAGG,UACKhB,0BAAAA,OAAAA,EAAMY,GAAGC,KAM/C,SAASI,IACHX,EAAAA,GAAOY,QAAQ,SAAAC,GACjBA,EAAKJ,YAAc,GACnBI,EAAKH,UAAY,eAIrB,SAASI,IACDC,IAAAA,EAAOC,KAAKC,MAAsB,EAAhBD,KAAKE,UACvBC,EAAOH,KAAKC,MAAsB,EAAhBD,KAAKE,UAExBxB,EAAMqB,GAAMI,GAMjBL,IALEpB,EAAMqB,GAAMI,GAAQH,KAAKE,SAAW,GAAM,EAAI,EAQlD,SAASE,EAAUC,GAGTA,OAFRV,IAEQU,EAAaC,KACd,IAAA,YACHC,GAAa,GACb,MAEG,IAAA,aACHA,GAAa,GACb,MAEG,IAAA,UACHC,GAAa,GACb,MAEG,IAAA,YACHA,GAAa,GAOjBnB,IAEIoB,KACFA,IAGGC,KAAmBC,MACtBxB,EAAYO,UAAUkB,OAAO,UAC7BhC,SAASiC,oBAAoB,UAAWT,IAG1CnB,EAASQ,YAAchB,EAGzB,SAASiC,IAIF,IAHCI,IAAAA,EAAM,GACRC,EAAQ,EAEHzB,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACjBb,EAAMY,GAAGC,KAAOb,EAAMY,GAAGC,EAAI,GAC/BuB,EAAIE,KAAK,GAETF,EAAIE,KAAK,GAKV,IAAA,IAAI1B,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACD,IAAhBb,EAAMY,GAAGC,IACXwB,IAKFA,SAAAA,IAASD,EAAIG,KAAK,SAAAC,GAAQA,OAAS,IAATA,KAOhC,SAASP,IAIF,IAHCG,IAAAA,EAAM,GACRC,EAAQ,EAEHzB,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACjBb,EAAMa,GAAGD,KAAOZ,EAAMa,EAAI,GAAGD,GAC/BwB,EAAIE,KAAK,GAETF,EAAIE,KAAK,GAKV,IAAA,IAAI1B,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IACD,IAAhBb,EAAMY,GAAGC,IACXwB,IAKFA,SAAAA,IAASD,EAAIG,KAAK,SAAAC,GAAQA,OAAS,IAATA,KAOhC,SAASX,EAAaY,GAChBT,GAAAA,IAAgB,CACb,IAAA,IAAIpB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACtB8B,IAAAA,EAAMC,EAAW3C,EAAMY,IAMvB8B,GAJAD,GACFC,EAAIE,UAGFF,EAAIG,OAAS,EAAG,CACb,IAAA,IAAIhC,EAAI,EAAGA,EAAI6B,EAAIG,OAAQhC,IAC1B6B,EAAI7B,EAAI,KAAO6B,EAAI7B,KACrB6B,EAAI7B,EAAI,IAAM,EACd6B,EAAI7B,GAAK,EACTd,GAAS2C,EAAI7B,EAAI,GACjB8B,EAAWD,IAIfA,EAAMC,EAAWD,GAGZA,KAAe,IAAfA,EAAIG,QACTH,EAAIJ,KAAK,GAGPG,GACFC,EAAIE,UAGN5C,EAAMY,GAAK8B,EAGbtB,KAIJ,SAASU,EAAaW,GAChBR,GAAAA,IAAe,CACZ,IAAA,IAAIrB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGrB,IAFDkC,IAAAA,EAAS,GAEJjC,EAAI,EAAGA,EAAI,EAAGA,IACrBiC,EAAOR,KAAKtC,EAAMa,GAAGD,IAGnB8B,IAAAA,EAAMC,EAAWG,GAMjBJ,GAJAD,GACFC,EAAIE,UAGFF,EAAIG,OAAS,EAAG,CACb,IAAA,IAAIhC,EAAI,EAAGA,EAAI6B,EAAIG,OAAQhC,IAC1B6B,EAAI7B,EAAI,KAAO6B,EAAI7B,KACrB6B,EAAI7B,EAAI,IAAM,EACd6B,EAAI7B,GAAK,EACTd,GAAS2C,EAAI7B,EAAI,IAIrB6B,EAAMC,EAAWD,GAGZA,KAAe,IAAfA,EAAIG,QACTH,EAAIJ,KAAK,GAGPG,GACFC,EAAIE,UAGD,IAAA,IAAI/B,EAAI,EAAGA,EAAI,EAAGA,IACrBb,EAAMa,GAAGD,GAAK8B,EAAI7B,GAGpB6B,EAAM,GACNI,EAAS,GAGX1B,KAIJ,SAASuB,EAAWD,GAGXK,OAFQL,EAAIM,OAAO,SAAAR,GAAQA,OAAS,IAATA,IAKpC,SAAST,IAWA,OAVP/B,EAAMkB,QAAQ,SAAA+B,GAAQA,OAAAA,EAAK/B,QAAQ,SAAAC,GAC7BA,GAAS,OAATA,EAKK,OAJPT,EAAWM,UAAUkB,OAAO,UAE5BhC,SAASiC,oBAAoB,UAAWT,IAEjC,OAIJ,EApQTzB,EAAYiD,iBAAiB,QAAS,SAACC,GACC,YAAlCA,EAAWC,OAAOrC,cACpBE,IAEAjB,EAAQ,CACN,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,GACV,CAAC,EAAG,EAAG,EAAG,IAGZD,EAAQ,EACRQ,EAASQ,YAAc,GAGzBd,EAAYe,UAAUkB,OAAO,SAC7BjC,EAAYe,UAAUqC,IAAI,WAC1BpD,EAAYc,YAAc,UAE1BP,EAAaQ,UAAUqC,IAAI,UAC3B3C,EAAWM,UAAUqC,IAAI,UACzB5C,EAAYO,UAAUqC,IAAI,UAE1BjC,IACAA,IACAT,IAEAT,SAASgD,iBAAiB,UAAWxB","file":"main.0d82a69e.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet score = 0;\n\nlet field = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nconst startButton = document.querySelector('button');\nconst gameField = document.querySelectorAll('.field-row');\nconst cells = document.querySelectorAll('.field-cell');\nconst scoreVal = document.querySelector('.game-score');\n\nconst messageStart = document.querySelector('.message-start');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\n\nstartButton.addEventListener('click', (hendlEvent) => {\n  if (hendlEvent.target.textContent === 'Restart') {\n    reset();\n\n    field = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n\n    score = 0;\n    scoreVal.textContent = 0;\n  }\n\n  startButton.classList.remove('start');\n  startButton.classList.add('restart');\n  startButton.textContent = 'Restart';\n\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  getRandomCell();\n  getRandomCell();\n  render();\n\n  document.addEventListener('keydown', moveCells);\n});\n\nfunction render() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (field[i][j]) {\n        gameField[i].children[j].textContent = field[i][j];\n\n        gameField[i].children[j].classList\n          = `field-cell field-cell--${field[i][j]}`;\n      }\n    }\n  }\n}\n\nfunction reset() {\n  [...cells].forEach(cell => {\n    cell.textContent = '';\n    cell.classList = 'field-cell';\n  });\n}\n\nfunction getRandomCell() {\n  const num1 = Math.floor(Math.random() * 4);\n  const num2 = Math.floor(Math.random() * 4);\n\n  if (!field[num1][num2]) {\n    field[num1][num2] = Math.random() > 0.9 ? 4 : 2;\n\n    return;\n  }\n\n  getRandomCell();\n}\n\nfunction moveCells(keybordEvent) {\n  reset();\n\n  switch (keybordEvent.key) {\n    case 'ArrowLeft':\n      moveHorizont(false);\n      break;\n\n    case 'ArrowRight':\n      moveHorizont(true);\n      break;\n\n    case 'ArrowUp':\n      moveVertical(false);\n      break;\n\n    case 'ArrowDown':\n      moveVertical(true);\n      break;\n\n    default:\n      break;\n  }\n\n  render();\n\n  if (checkIsWin()) {\n    checkIsWin();\n  }\n\n  if (!canMoveHoriz() && !canMoveVert()) {\n    messageLose.classList.remove('hidden');\n    document.removeEventListener('keydown', moveCells);\n  }\n\n  scoreVal.textContent = score;\n}\n\nfunction canMoveHoriz() {\n  const res = [];\n  let count = 0;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 1; j < 4; j++) {\n      if (field[i][j] === field[i][j - 1]) {\n        res.push(1);\n      } else {\n        res.push(0);\n      }\n    }\n  }\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (field[i][j] === 0) {\n        count++;\n      }\n    }\n  }\n\n  if (count || res.some(item => item === 1)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction canMoveVert() {\n  const res = [];\n  let count = 0;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 1; j < 4; j++) {\n      if (field[j][i] === field[j - 1][i]) {\n        res.push(1);\n      } else {\n        res.push(0);\n      }\n    }\n  }\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (field[i][j] === 0) {\n        count++;\n      }\n    }\n  }\n\n  if (count || res.some(item => item === 1)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction moveHorizont(arg) {\n  if (canMoveHoriz()) {\n    for (let i = 0; i < 4; i++) {\n      let arr = clearEmpty(field[i]);\n\n      if (arg) {\n        arr.reverse();\n      }\n\n      if (arr.length > 1) {\n        for (let j = 1; j < arr.length; j++) {\n          if (arr[j - 1] === arr[j]) {\n            arr[j - 1] *= 2;\n            arr[j] = 0;\n            score += arr[j - 1];\n            clearEmpty(arr);\n          }\n        }\n\n        arr = clearEmpty(arr);\n      }\n\n      while (arr.length !== 4) {\n        arr.push(0);\n      }\n\n      if (arg) {\n        arr.reverse();\n      }\n\n      field[i] = arr;\n    }\n\n    getRandomCell();\n  }\n}\n\nfunction moveVertical(arg) {\n  if (canMoveVert()) {\n    for (let i = 0; i < 4; i++) {\n      let column = [];\n\n      for (let j = 0; j < 4; j++) {\n        column.push(field[j][i]);\n      }\n\n      let arr = clearEmpty(column);\n\n      if (arg) {\n        arr.reverse();\n      }\n\n      if (arr.length > 1) {\n        for (let j = 1; j < arr.length; j++) {\n          if (arr[j - 1] === arr[j]) {\n            arr[j - 1] *= 2;\n            arr[j] = 0;\n            score += arr[j - 1];\n          }\n        }\n\n        arr = clearEmpty(arr);\n      }\n\n      while (arr.length !== 4) {\n        arr.push(0);\n      }\n\n      if (arg) {\n        arr.reverse();\n      }\n\n      for (let j = 0; j < 4; j++) {\n        field[j][i] = arr[j];\n      }\n\n      arr = [];\n      column = [];\n    }\n\n    getRandomCell();\n  }\n}\n\nfunction clearEmpty(arr) {\n  const newArr = arr.filter(item => item !== 0);\n\n  return newArr;\n}\n\nfunction checkIsWin() {\n  field.forEach(rows => rows.forEach(cell => {\n    if (cell === 2048) {\n      messageWin.classList.remove('hidden');\n\n      document.removeEventListener('keydown', moveCells);\n\n      return true;\n    }\n  }));\n\n  return false;\n}\n"]}